<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thinking Chat</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body hx-ext="ws">
    <div class="container" ws-connect="/ws">
        <header>
            <div class="header-left">
                <h1>Thinking Chat</h1>
                <div class="model-info">
                    <span class="model-name" title="{{ model_name }}">{{ model_name.split('/')[-1] }}</span>
                    {% if encryption_enabled %}
                    <span class="encryption-badge" title="End-to-end encrypted">üîí</span>
                    {% else %}
                    <span class="encryption-badge warning" title="‚ö†Ô∏è Encryption disabled">üîì</span>
                    {% endif %}
                </div>
            </div>
            <div class="header-right">
                <button id="clear-btn" class="clear-btn" title="Clear chat history">Clear</button>
                <div class="status disconnected" id="status">Disconnected</div>
            </div>
        </header>
        
        <div class="chat-container">
            <div class="messages" id="messages"></div>
        </div>
        
        <div class="input-container">
            <div class="controls">
                <label for="effort">Thinking effort:</label>
                <select id="effort" name="effort">
                    <option value="none">None (instant)</option>
                    <option value="low">Low (500 tokens)</option>
                    <option value="medium" selected>Medium (2000 tokens)</option>
                    <option value="high">High (16000 tokens)</option>
                </select>
                <div class="spacer"></div>
                <label for="format">Response format:</label>
                <select id="format" name="format">
                    <option value="text" selected>Text</option>
                    <option value="json_object">JSON</option>
                </select>
            </div>
            <form id="chat-form" ws-send>
                <input type="hidden" name="session_id" value="{{ session_id }}">
                <textarea 
                    id="message-input"
                    name="message"
                    placeholder="Type your message... (Ctrl/Cmd + Enter to send)" 
                    rows="3"
                    autocomplete="off"
                    maxlength="10000"
                ></textarea>
                <button type="submit" id="send-btn">
                    <span class="btn-text">Send</span>
                    <span class="btn-spinner" style="display: none;">‚è≥</span>
                </button>
            </form>
        </div>
    </div>
    
    <script>
        const SESSION_ID = "{{ session_id }}";
    </script>
    <script src="/static/htmx.min.js"></script>
    <script src="/static/htmx-ext-ws.js"></script>
    <script src="/static/script.js"></script>
</body>
</html>
